## 线程

每个进程被分配一个时间段，称作它的**时间片**，即该进程允许运行的时间。如果在时间片结束时进程还在运行，则CPU将被剥夺并分配给另一个进程。如果进程在时间片结束前阻塞或结束，则CPU当即进行切换。调度程序所要做的就是维护一张就绪进程列表，当进程用完它的时间片后，它被移到队列的末尾



线程是进程中的一条执行流程。

从资源组合的角度，进程把一组相关的资源组合起来，构成了一个资源环境，（代码段，数据段）等

从运行的角度，代码在这个资源平台上的一条执行执行流程（线程）。

线程包括（pc、sp、state）

线程的优点：

- 一个进程可以同时存在多个线程
- 各个线程之间可以并发执行
- 各个线程之间可以共享地址空间和文件资源

线程的缺点

- 一个线程崩溃，导致进程退出



### 线程实现

1. 用户线程 用户空间实现

   posix pthread 

   操作系统看不到的线程。由运行库管理，


2. 内核线程

   windows api

   操作系统管理的线程

3. 轻进程

   内核支持的用户线程，一个进程可以有多个轻量进程，每个量级进程由一个单独内核线程来支持。

用户线程和内核线程对应

- 1对1
- 多对1
- 多对多

TCB（thread control  block） 线程控制块。线程的调度，用户库实现。

每个进程需要的自己的线程控制块列表，跟踪记录它的各个线程的状态 信息。



用户线程缺点：一个线程发起系统调用而被阻塞，整个进程在等待。

内核线程：是在操作系统的内核当中实现的一种线程机制，由操作系统的内核来完成线程的创建、终止和管理。

